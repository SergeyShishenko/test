<!DOCTYPE html>
<?php #!other\PROBA\1.php ?>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- <table class="table">
        <thead>
            <tr>
                <th>#</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Username</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>Mark</td>
                <td>Otto</td>
                <td>@mdo</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Jacob</td>
                <td>Thornton</td>
                <td>@fat</td>
            </tr>
            ...
        </tbody>
    </table> -->


    <table border="1" style="width: 100%;" class="table">
        <tbody>
            <tr>
                <td>Заказ</td>
                <td>Изделие</td>
                <td>СЕ</td>
                <td>Поз.</td>
                <td>Артикул</td>
                <td>Наименование</td>
                <td>Поставщик</td>
                <td>Цвет</td>
                <td>Ед.измерения</td>
                <td>Кол-во</td>
                <td>Примечание</td>
            </tr>
            <tr>
                <td>2384 </td>
                <td>71</td>
                <td></td>
                <td></td>
                <td>BU12 (82-02)</td>
                <td>Футорка металлическая с распорным шариком M6</td>
                <td></td>
                <td></td>
                <td></td>
                <td>20</td>
                <td></td>
            </tr>
            <tr>
                <td>2384 </td>
                <td>71</td>
                <td></td>
                <td></td>
                <td>TE01</td>
                <td>Шток эксцентрика евровинт (34 мм)</td>
                <td></td>
                <td></td>
                <td></td>
                <td>20</td>
                <td></td>
            </tr>
            <tr>
                <td>2384 </td>
                <td>71</td>
                <td></td>
                <td></td>
                <td>EC02ZL</td>
                <td>Эксцентрик для плит толщиной 16 мм</td>
                <td></td>
                <td></td>
                <td></td>
                <td>20</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>2.1</td>
                <td>1</td>
                <td></td>
                <td>декор</td>
                <td></td>
                <td></td>
                <td></td>
                <td>1</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>5.1</td>
                <td>2</td>
                <td>924_18_921_1</td>
                <td>Скрытая дверная петля Tectus TE 240 3D цвет F-1 серебристый</td>
                <td></td>
                <td></td>
                <td></td>
                <td>3</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>4.2</td>
                <td>3</td>
                <td>6565 870</td>
                <td>INTEGRATO Опора регулируемая с шипами, регулировка 25 мм</td>
                <td></td>
                <td></td>
                <td></td>
                <td>8</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>1.1</td>
                <td>7</td>
                <td>245.55.913</td>
                <td>Пружинная защелка Quick оцинкованная в комплекте с ответной частью</td>
                <td></td>
                <td></td>
                <td></td>
                <td>4</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>1.1</td>
                <td>8</td>
                <td>TE14</td>
                <td>Шток эксцентрика угловой</td>
                <td></td>
                <td></td>
                <td></td>
                <td>8</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>5.1</td>
                <td>12</td>
                <td style="color: green;">5000502-07-707 </td>
                <td>Эксцентрик усиленный в металлическом корпусе 16 мм с бортиком, никель</td>
                <td>МДМ-КОМПЛЕКТ</td>
                <td>металл</td>
                <td>комплектов</td>
                <td>53</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>1.1</td>
                <td>13</td>
                <td style="color: green;">5000502-07-707 </td>
                <td>Эксцентрик усиленный в металлическом корпусе 16 мм с бортиком, никель</td>
                <td>МДМ-КОМПЛЕКТ</td>
                <td>металл</td>
                <td>комплектов</td>
                <td>38</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>1.1</td>
                <td>14</td>
                <td style="color: green;">5000502-07-752 </td>
                <td>Конфирмат 7,0Х70 для плит толщиной 25 мм</td>
                <td>МДМ-КОМПЛЕКТ</td>
                <td>металл</td>
                <td>шт.</td>
                <td>2</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>1.1</td>
                <td>15</td>
                <td style="color: green;">5000502-07-750 </td>
                <td>Конфирмат 7,0Х50 для плит толщиной 16 мм</td>
                <td>МДМ-КОМПЛЕКТ</td>
                <td>металл</td>
                <td>шт.</td>
                <td>31</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>1.1</td>
                <td>16</td>
                <td>EC02ZL/16</td>
                <td>Эксцентрик для плит толщиной 16 мм</td>
                <td></td>
                <td></td>
                <td></td>
                <td>8</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>5.1</td>
                <td>17</td>
                <td>8 X 30К</td>
                <td>шкант 8*30</td>
                <td></td>
                <td></td>
                <td></td>
                <td>13</td>
                <td></td>
            </tr>
            <tr>
                <td>2384</td>
                <td>71</td>
                <td>1.1</td>
                <td>19</td>
                <td>BU12 (82-02)</td>
                <td>Футорка металлическая с распорным шариком M6</td>
                <td></td>
                <td></td>
                <td></td>
                <td>8</td>
                <td></td>
            </tr>
        </tbody>
    </table>



    <button class="btn">кнопка</button>
    <button class="btn2">AJAX</button>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
    <script>
    $('.btn').click(function() {
        // var tdVals = $('.table').find('tr > td').siblings('td').map(function(i, td){
        var tdVals = $('.table').find('tr').map(function(i, td) {
            // console.log($(td).text());
            return $(td).text();
        })
        // console.log(tdVals);
    });
    </script>

    <script>
    // var arrdata = {}
    var arrdata = {}

    tables = document.querySelectorAll('table')

    // table
    for (let i = 0; i < tables.length; i++) {
        arrdata['table' + i] = []
        var currTable = tables[i]
        var currRows = tables[i].querySelectorAll('tr')

        // tr без шапки
        for (let j = 1; j < currRows.length; j++) {
            arrdata['table' + i][j] = []
            var currRow = currRows[j]
            var cells = currRow.querySelectorAll('td')

            // td
            for (let k = 0; k < cells.length; k++) {
                arrdata['table' + i][j][k] = cells[k].textContent
            }
        }
	}

	// ids={
	// 		client : "qqqq",
	// 		agent : "fgfggg",
	// 		address : "$('#address_output').text()",
	// 		floor : "$('#floor_output').text()"	

	// 	};  

	$('.btn2').click(function() {
		ids=JSON.stringify(arrdata);
		// arr=arrdata;

		
		// console.log(ids);
		// $.post('2.php', arr , function(data) {              
		jQuery.ajax({
        type: "POST", // HTTP метод  POST или GET
        url: "2.php", //url-адрес, по которому будет отправлен запрос
        dataType:"text", // Тип данных
        data: {ids}, //post переменные
        success:function(response){
        // в случае успеха, скрываем, выбранный пользователем для удаления, элемент
        console.log(response);
        

        },
        error:function (xhr, ajaxOptions, thrownError){
        //выводим ошибку
        console.log(thrownError);
        }
        });
    });
	
	 


	
    // function dump(obj) {
    //     var out = '';
    //     for (var i in obj) {
    //         out += i + ": " + obj[i] + "<br>";
    //     }

    // 	// console.log(out);

    //     // or, if you wanted to avoid alerts...

    //     var pre = document.createElement('div');
    //     pre.innerHTML = out;
    //     document.body.appendChild(pre)
    // }
    // function objDump(object) {
    //     var out = "";
    //     if(object && typeof(object) == "object"){
    //         for (var i in object) {
    //             out += i + ": " + object[i] + "\n";
    // 			console.log(i+" : "+ out);
    //         }
    //     } else {
    //         out = object;
    //     }

    // }

    
    // getObj(arrdata, 3, 4)
    // getObj(arrdata, 3, 5)

    function getObj(arr, row, td) {
        console.log('Строка ' + (row + 1))
        console.log('Колонка ' + (td + 1))
        console.log(arr['table0'][row][td])
    }

    // dump(arrdata);
    // objDump(arrdata);
    </script>

</body>

</html>